jQuery&&!function(t){t.extend(t.fn,{uploadify:function(e){t(this).each(function(){var i=t.extend({id:t(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:30,width:120,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:999,simUploadLimit:1,queueID:!1,displayData:"percentage",removeCompleted:!0,onInit:function(){},onSelect:function(){},onSelectOnce:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onClearQueue:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},e);t(this).data("settings",i);var a=location.pathname;a=a.split("/"),a.pop(),a=a.join("/")+"/";var n={};if(n.uploadifyID=i.id,n.pagepath=a,i.buttonImg&&(n.buttonImg=escape(i.buttonImg)),i.buttonText&&(n.buttonText=escape(i.buttonText)),i.rollover&&(n.rollover=!0),n.script=i.script,n.folder=escape(i.folder),i.scriptData){var o="";for(var d in i.scriptData)o+="&"+d+"="+i.scriptData[d];n.scriptData=escape(o.substr(1))}n.width=i.width,n.height=i.height,n.wmode=i.wmode,n.method=i.method,n.queueSizeLimit=i.queueSizeLimit,n.simUploadLimit=i.simUploadLimit,i.hideButton&&(n.hideButton=!0),i.fileDesc&&(n.fileDesc=i.fileDesc),i.fileExt&&(n.fileExt=i.fileExt),i.multi&&(n.multi=!0),i.auto&&(n.auto=!0),i.sizeLimit&&(n.sizeLimit=i.sizeLimit),i.checkScript&&(n.checkScript=i.checkScript),i.fileDataName&&(n.fileDataName=i.fileDataName),i.queueID&&(n.queueID=i.queueID),i.onInit()!==!1&&(t(this).css("display","none"),t(this).after('<div id="'+t(this).attr("id")+'Uploader"></div>'),swfobject.embedSWF(i.uploader,i.id+"Uploader",i.width,i.height,"9.0.24",i.expressInstall,n,{quality:"high",wmode:i.wmode,allowScriptAccess:i.scriptAccess},{},function(t){"function"==typeof i.onSWFReady&&t.success&&i.onSWFReady()}),0==i.queueID?t("#"+t(this).attr("id")+"Uploader").after('<div id="'+t(this).attr("id")+'Queue" class="uploadifyQueue"></div>'):t("#"+i.queueID).addClass("uploadifyQueue")),"function"==typeof i.onOpen&&t(this).bind("uploadifyOpen",i.onOpen),t(this).bind("uploadifySelect",{action:i.onSelect,queueID:i.queueID},function(e,a,n){if(e.data.action(e,a,n)!==!1){var o=.01*Math.round(n.size/1024*100),d="KB";o>1e3&&(o=.01*Math.round(.001*o*100),d="MB");var u=o.toString().split(".");o=u.length>1?u[0]+"."+u[1].substr(0,2):u[0],fileName=n.name.length>20?n.name.substr(0,20)+"...":n.name,queue="#"+t(this).attr("id")+"Queue",e.data.queueID&&(queue="#"+e.data.queueID),t(queue).append('<div id="'+t(this).attr("id")+a+'" class="uploadifyQueueItem"><div class="cancel"><a href="javascript:jQuery(\'#'+t(this).attr("id")+"').uploadifyCancel('"+a+'\')"><img src="'+i.cancelImg+'" border="0" /></a></div><span class="fileName">'+fileName+" ("+o+d+')</span><span class="percentage"></span><div class="uploadifyProgress"><div id="'+t(this).attr("id")+a+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div></div></div>')}}),t(this).bind("uploadifySelectOnce",{action:i.onSelectOnce},function(e,a){e.data.action(e,a),i.auto&&(i.checkScript?t(this).uploadifyUpload(null,!1):t(this).uploadifyUpload(null,!0))}),t(this).bind("uploadifyQueueFull",{action:i.onQueueFull},function(t,e){t.data.action(t,e)!==!1&&alert("The queue is full.  The max size is "+e+".")}),t(this).bind("uploadifyCheckExist",{action:i.onCheck},function(e,i,n,o,d){var u=new Object;if(u=n,u.folder="/"==o.substr(0,1)?o:a+o,d)for(var l in n)var s=l;t.post(i,u,function(i){for(var a in i)if(e.data.action(e,i,a)!==!1){var n=confirm("Do you want to replace the file "+i[a]+"?");n||document.getElementById(t(e.target).attr("id")+"Uploader").cancelFileUpload(a,!0,!0)}d?document.getElementById(t(e.target).attr("id")+"Uploader").startFileUpload(s,!0):document.getElementById(t(e.target).attr("id")+"Uploader").startFileUpload(null,!0)},"json")}),t(this).bind("uploadifyCancel",{action:i.onCancel},function(e,i,a,n,o,d){if(e.data.action(e,i,a,n,d)!==!1&&o){var u=1==d?0:250;t("#"+t(this).attr("id")+i).fadeOut(u,function(){t(this).remove()})}}),t(this).bind("uploadifyClearQueue",{action:i.onClearQueue},function(e,a){var n=i.queueID?i.queueID:t(this).attr("id")+"Queue";a&&t("#"+n).find(".uploadifyQueueItem").remove(),e.data.action(e,a)!==!1&&t("#"+n).find(".uploadifyQueueItem").each(function(){var e=t(".uploadifyQueueItem").index(this);t(this).delay(100*e).fadeOut(250,function(){t(this).remove()})})});var u=[];t(this).bind("uploadifyError",{action:i.onError},function(e,i,a,n){if(e.data.action(e,i,a,n)!==!1){var o=new Array(i,a,n);u.push(o),t("#"+t(this).attr("id")+i).find(".percentage").text(" - "+n.type+" Error"),t("#"+t(this).attr("id")+i).find(".uploadifyProgress").hide(),t("#"+t(this).attr("id")+i).addClass("uploadifyError")}}),"function"==typeof i.onUpload&&t(this).bind("uploadifyUpload",i.onUpload),t(this).bind("uploadifyProgress",{action:i.onProgress,toDisplay:i.displayData},function(e,i,a,n){e.data.action(e,i,a,n)!==!1&&(t("#"+t(this).attr("id")+i+"ProgressBar").animate({width:n.percentage+"%"},250,function(){100==n.percentage&&t(this).closest(".uploadifyProgress").fadeOut(250,function(){t(this).remove()})}),"percentage"==e.data.toDisplay&&(displayData=" - "+n.percentage+"%"),"speed"==e.data.toDisplay&&(displayData=" - "+n.speed+"KB/s"),null==e.data.toDisplay&&(displayData=" "),t("#"+t(this).attr("id")+i).find(".percentage").text(displayData))}),t(this).bind("uploadifyComplete",{action:i.onComplete},function(e,a,n,o,d){e.data.action(e,a,n,unescape(o),d)!==!1&&(t("#"+t(this).attr("id")+a).find(".percentage").text(" - Completed"),i.removeCompleted&&t("#"+t(e.target).attr("id")+a).fadeOut(250,function(){t(this).remove()}),t("#"+t(e.target).attr("id")+a).addClass("completed"))}),"function"==typeof i.onAllComplete&&t(this).bind("uploadifyAllComplete",{action:i.onAllComplete},function(t,e){t.data.action(t,e)!==!1&&(u=[])})})},uploadifySettings:function(e,i,a){var n=!1;if(t(this).each(function(){if("scriptData"==e&&null!=i){if(a)var o=i;else var o=t.extend(t(this).data("settings").scriptData,i);var d="";for(var u in o)d+="&"+u+"="+o[u];i=escape(d.substr(1))}n=document.getElementById(t(this).attr("id")+"Uploader").updateSettings(e,i)}),null==i&&"scriptData"==e){for(var o=unescape(n).split("&"),d=new Object,u=0;u<o.length;u++){var l=o[u].split("=");d[l[0]]=l[1]}n=d}return n},uploadifyUpload:function(e,i){t(this).each(function(){i||(i=!1),document.getElementById(t(this).attr("id")+"Uploader").startFileUpload(e,i)})},uploadifyCancel:function(e){t(this).each(function(){document.getElementById(t(this).attr("id")+"Uploader").cancelFileUpload(e,!0,!0,!1)})},uploadifyClearQueue:function(){t(this).each(function(){document.getElementById(t(this).attr("id")+"Uploader").clearFileUploadQueue(!1)})}})}(jQuery);