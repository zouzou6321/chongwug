{% extends 'mobile/tpl/base/base.html' %}
{% load mobile %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="content content-common">
    <form action="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/" method="get">
      <input type="search" placeholder="Search">
    </form>
    <select style="width:50%;font-size:17px;background-color:#fff;" onchange="buy_select(this)">
    {% if typekey == 'all'%}
    <option selected="selected" value="{{ urls }}{{ directkey }}/all/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">全部</option>
    {% else %}
    <option value="{{ urls }}{{ directkey }}/all/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">全部</option>
    {% endif %}
    {% for type in types %}
    {% if type == typekey %}
    <option selected="selected" value="{{ urls }}{{ directkey }}/{{ type }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">{{ type }}</option>
    {% else %}
    <option value="{{ urls }}{{ directkey }}/{{ type }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">{{ type }}</option>
    {% endif %}
    {% endfor %}
    </select><select style="width:50%;font-size:17px;background-color:#fff;" onchange="buy_select(this)">
{% if princekey == '0'%}
<option selected="selected" value="{{ urls }}{{ directkey }}/{{ typekey }}/0/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">全部</option>
        {% else %}
        <option value="{{ urls }}{{ directkey }}/{{ typekey }}/0/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">全部</li>
        {% endif %}
        {% for prince in princes %}
        {% if prince.a == princekey %}
        <option selected="selected" value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ prince.a }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">{{ prince.d }}</option>
        {% else %}
        <option value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ prince.a }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">{{ prince.d }}</option>
        {% endif %}
        {% endfor %}
    </select><select style="width:50%;font-size:17px;background-color:#fff;" onchange="buy_select(this)">
    	{% if directkey == 'all'%}
        <option selected="selected" value="{{ urls }}all/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">全部</option>
        {% else %}
        <option value="{{ urls }}all/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">全部</option>
        {% endif %}
        {% for direct in directs %}
        {% if direct == directkey %}
        <option selected="selected" value="{{ urls }}{{ direct }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">城{{ direct }}</option>
        {% else %}
        <option value="{{ urls }}{{ direct }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/1/">城{{ direct }}</option>
        {% endif %}
        {% endfor %}
    </select><select style="width:50%;font-size:17px;background-color:#fff;" onchange="buy_select(this)">
    	{% if epidemickey == 'all'%}
        <option selected="selected" value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/all/{{ searchkey }}/1/">全部</option>
        {% else %}
        <option value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/all/{{ searchkey }}/1/">全部</option>
        {% endif %}
        {% for epidemic in epidemics %}
        {% if epidemic == epidemickey %}
        <option selected="selected" value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemic }}/{{ searchkey }}/1/">{{ epidemic }}</option>
        {% else %}
        <option value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemic }}/{{ searchkey }}/1/">{{ epidemic }}</option>
        {% endif %}
        {% endfor %}
    </select><select style="font-size:17px;background-color:#fff;"  onchange="buy_select(this)">
    	{% if agekey == '0'%}
        <option selected="selected" value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/0/{{ epidemickey }}/{{ searchkey }}/1/">全部</option>
        {% else %}
        <option value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/0/{{ epidemickey }}/{{ searchkey }}/1/">全部</option>
        {% endif %}
        {% for age in ages %}
        {% if age.a == agekey %}
        <option selected="selected" value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ age.a }}/{{ epidemickey }}/{{ searchkey }}/1/">{{ age.d }}</option>
        {% else %}
        <option value="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ age.a }}/{{ epidemickey }}/{{ searchkey }}/1/">{{ age.d }}</option>
        {% endif %}
        {% endfor %}
    </select>
    {% if pets_imgs%}
    <ul class="table-view">
      {% for pet_img in pets_imgs %}
      <li class="table-view-cell media">
        <a class="navigate-right" href="{{ urls }}detail/{{ pet_img.pet.id }}/">
          <img class="media-object pull-left" src="{{ pet_img.img.img_url }}!small" width="90">
          <div class="media-body">
            <div style="height:44px; overflow:hidden;"><strong>[{{ pet_img.pet.farm.name }}]</strong> <span style="font-size:15px;">{{ pet_img.pet.short_desc }}</span></div>
            <p>{{ pet_img.min_price }}元-{{ pet_img.max_price }}元</p>
          </div>
        </a>
      </li>
      {% endfor %}
    </ul>
    <style>
    .pagination li{
    	display:inline;
    }
    </style>
    <div style="text-align:center;" >
        <ul class="pagination pagination-primary">
            {% if curpage == 1 %}
            <li class="disabled"><span>首页</span></li>
            <li class="disabled"><span>上一页</span></li>
            {% else %}
            <li><a href="/buy/">首页</a></li>
            <li><a href="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/{{ pageup }}/">上一页</a></li>
            {% endif %}
            {% for page in pages %}
            {% if page == curpage %}
            <li class="active"><span>{{ page }}</span></li>
            {% else %}
            <li><a href="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/{{ page }}/">{{ page }}</a></li>
            {% endif %}
            {% endfor %}
            {% if curpage ==  allpage%}
            <li class="disabled"><span>下一页</span></li>
            <li class="disabled"><span>尾页</span></li>
            {% else %}
            <li><a href="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/{{ pagedown }}/">下一页</a></li>
            <li><a href="{{ urls }}{{ directkey }}/{{ typekey }}/{{ princekey }}/{{ agekey }}/{{ epidemickey }}/{{ searchkey }}/{{ allpage }}/">尾页</a></li>
            {% endif %}
         </ul>
    </div>
    {% else %}
    <p>没有找到符合条件的宠物</p>
    {% endif %}
</div>


{% endblock %}
{% block scripts %}
<script>
function buy_select(obj){
	window.location=obj.value;
}
</script>
{% endblock %}