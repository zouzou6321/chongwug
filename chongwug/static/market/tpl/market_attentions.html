{% extends 'market/tpl/base/base.html' %}
{% load assets_market %}
{% block title %}内容编辑{% endblock %}
{% block css %}
<link rel="stylesheet" href="{{ 'css/jquery.dataTables.css'|assets_market }}"/>
<link rel="stylesheet" href="{{ 'css/dataTables.editor.css'|assets_market }}"/>
{% endblock %}
{% block main %}
<h1 class="page-header">预约订单</h1>

<table class="table table-striped" id="js-order-info-table">
    <thead>
        <tr>
            <th>编号</th>
            <th>姓名</th>
            <th>电话</th>
            <th>犬舍</th>
            <th>犬种</th>
            <th>预约时间</th>
            <th>预约地点</th>
            <th>交通方式</th>
            <th>是否受理</th>
            <th>订单提交时间</th>
            <th>操作</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <th>编号</th>
            <th>姓名</th>
            <th>电话</th>
            <th>犬舍</th>
            <th>犬种</th>
            <th>预约时间</th>
            <th>预约地点</th>
            <th>交通方式</th>
            <th>是否受理</th>
            <th>订单提交时间</th>
            <th>操作</th>
        </tr>
    </tfoot>
    <tbody></tbody>
</table>


{% endblock %}
{% block scripts %}
<script src="{{ 'lib/datatables/jquery.datatables.js'|assets_market }}"></script>
<script src="{{ 'lib/datatables/datatables.tabletools.js'|assets_market }}"></script>
<script src="{{ 'lib/datatables/datatables.editor.js'|assets_market }}"></script>
<script>
;(function($){
    var $orderInfoTable = $('#js-order-info-table'),
        filter = 'all',
        orderInfoTable = $orderInfoTable.DataTable({
            serverSide: true,
            processing: true,
            ajax: {
                url: '/market/attention/data/',
                data: function ( d ) {
                    d.filter = filter;
                }
            },
            ordering: false,
            bAutoWidth: false,
            language: {
                url: "{{ 'lib/datatables/zh-CN.json'|assets_market }}"
            }
{#            ,columns: [#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {data: ''},#}
{#                {#}
{#                    data: null,#}
{#                    defaultContent: '<a href="javascript:" class="btn-edit"><i class="glyphicon glyphicon-pencil"></i></a>'#}
{#                }#}
{#            ]#}
        });

    var orderInfoEditor = new $.fn.dataTable.Editor({
        ajax: '',
        table: "#js-order-info-table",
        fields: [{
            name: ''
        }]
    });

    $orderInfoTable.on('click', '.btn-edit', function(){
        orderInfoEditor
            .title( '修改' )
            .buttons( { "label": "确定", "fn": function () { orderInfoEditor.submit() } } )
            .edit( $(this).closest('tr') );
    });

}(jQuery));

</script>
{% endblock %}